
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://feng003.github.io/mysql/%E9%9D%A2%E8%AF%95%E9%A2%98/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.3">
    
    
      
        <title>面试题 - 我的文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0e669242.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mysql60" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="我的文档" class="md-header__button md-logo" aria-label="我的文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            我的文档
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              面试题
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/feng003/wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="我的文档" class="md-nav__button md-logo" aria-label="我的文档" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    我的文档
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/feng003/wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Github
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../kali/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kali
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySql
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#mysql60" class="md-nav__link">
    最全MySQL面试60题和答案
  </a>
  
    <nav class="md-nav" aria-label="最全MySQL面试60题和答案">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1mysql" class="md-nav__link">
    1.Mysql中有哪几种锁？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2mysql" class="md-nav__link">
    2.Mysql中有哪些不同的表类型？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3mysqlmyisaminnodb" class="md-nav__link">
    3.简述在MySQL数据库中MyISAM和InnoDB的区别
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4mysqlinnodb" class="md-nav__link">
    4.Mysql中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5charvarchar" class="md-nav__link">
    5.CHAR和VARCHAR的区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6" class="md-nav__link">
    6.主键和候选键有什么区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7myisamchk" class="md-nav__link">
    7.myisamchk是用来做什么的？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8myisam-staticmyisam-dynamic" class="md-nav__link">
    8.MyISAM Static和MyISAM Dynamic有什么区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#9timestamp" class="md-nav__link">
    9.如果一个表有一列定义为TIMESTAMP，将发生什么？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#10auto-increment" class="md-nav__link">
    10.列设置为AUTO INCREMENT时，如果在表中达到最大值，会发生什么情况？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    11.怎样才能找出最后一次插入时分配了哪个自动增量？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    12.你怎么看到为表格定义的所有索引？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13like_" class="md-nav__link">
    13.LIKE声明中的％和_是什么意思？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14unixmysql" class="md-nav__link">
    14.如何在Unix和Mysql时间戳之间进行转换？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    15.列对比运算符是什么？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16blobtext" class="md-nav__link">
    16.BLOB和TEXT有什么区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#17mysql_fetch_arraymysql_fetch_object" class="md-nav__link">
    17.mysql_fetch_array和mysql_fetch_object的区别是什么？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#18myisam" class="md-nav__link">
    18.MyISAM表类型将在哪里存储，并且还提供其存储格式？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#19mysqldistinct" class="md-nav__link">
    19.Mysql如何优化DISTINCT？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#20" class="md-nav__link">
    20.可以使用多少列创建索引？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#21nowcurrent_date" class="md-nav__link">
    21.NOW（）和CURRENT_DATE（）有什么区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    22.什么是非标准字符串类型？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23sql" class="md-nav__link">
    23.什么是通用SQL函数？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24mysql" class="md-nav__link">
    24.MYSQL支持事务吗？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25mysql" class="md-nav__link">
    25.mysql里记录货币用什么字段类型好
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26mysql" class="md-nav__link">
    26.mysql有关权限的表都有哪几个？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27" class="md-nav__link">
    27.列的字符串类型可以是什么？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28mysql" class="md-nav__link">
    28.MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#29" class="md-nav__link">
    29.锁的优化策略
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#30" class="md-nav__link">
    30.索引的底层实现原理和优化
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    31.什么情况下设置了索引但无法使用
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32mysql" class="md-nav__link">
    32实践中如何优化MySQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    33.优化数据库的方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34mysql" class="md-nav__link">
    34.简单描述mysql中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    35.数据库中的事务是什么?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36sql" class="md-nav__link">
    36.SQL注入漏洞产生的原因？如何防止？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37" class="md-nav__link">
    37.为表中得字段选择合适得数据类型
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#38" class="md-nav__link">
    38.存储时期
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#39" class="md-nav__link">
    39.对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题：
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#40mysql" class="md-nav__link">
    40.解释MySQL外连接、内连接与自连接的区别
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#41myql" class="md-nav__link">
    41.Myql中的事务回滚机制概述
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42sql" class="md-nav__link">
    42.SQL语言包括哪几部分？每部分都有哪些操作关键字？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43" class="md-nav__link">
    43.完整性约束包括哪些？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44" class="md-nav__link">
    44.什么是锁？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45" class="md-nav__link">
    45.什么叫视图？游标是什么？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46" class="md-nav__link">
    46.什么是存储过程？用什么来调用？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#47" class="md-nav__link">
    47.如何通俗地理解三个范式？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48" class="md-nav__link">
    48.什么是基本表？什么是视图？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#49" class="md-nav__link">
    49.试述视图的优点？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#50-null" class="md-nav__link">
    50. NULL是什么意思
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#51" class="md-nav__link">
    51.主键、外键和索引的区别？
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52" class="md-nav__link">
    52.你可以用什么来确保表格里的字段只接受特定范围里的值?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53sql" class="md-nav__link">
    53.说说对SQL语句优化有哪些方法？（选择几条）
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>面试题</h1>

<p>1、列举常见的关系型数据库和非关系型都有那些？</p>
<pre><code>关系型数据库：Oracle、DB2、Microsoft SQL Server、Microsoft Access、MySQL
非关系型数据库：NoSql、Cloudant、MongoDb、redis、HBase

两种数据库之间的区别：

关系型数据库：
    关系型数据库的特性
    1、关系型数据库，是指采用了关系模型来组织数据的数据库；
    2、关系型数据库的最大特点就是事务的一致性；
    3、简单来说，关系模型指的就是二维表格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。
    关系型数据库的优点
    1、容易理解：二维表结构是非常贴近逻辑世界一个概念，关系模型相对网状、层次等其他模型来说更容易理解；
    2、使用方便：通用的SQL语言使得操作关系型数据库非常方便；
    3、易于维护：丰富的完整性(实体完整性、参照完整性和用户定义的完整性)大大减低了数据冗余和数据不一致的概率；
    4、支持SQL，可用于复杂的查询。
    关系型数据库的缺点
    1、为了维护一致性所付出的巨大代价就是其读写性能比较差；
    2、固定的表结构；
    3、高并发读写需求；
    4、海量数据的高效率读写；

非关系型数据库
    非关系型数据库的特性
    1、使用键值对存储数据；
    2、分布式；
    3、一般不支持ACID特性；
    4、非关系型数据库严格上不是一种数据库，应该是一种数据结构化存储方法的集合。
    非关系型数据库的优点
    1、无需经过sql层的解析，读写性能很高；
    2、基于键值对，数据没有耦合性，容易扩展；
    3、存储数据的格式：nosql的存储格式是key,value形式、文档形式、图片形式等等，文档形式、图片形式等等，
    而关系型数据库则只支持基础类型。
    非关系型数据库的缺点
    1、不提供sql支持，学习和使用成本较高；
    2、无事务处理，附加功能bi和报表等支持也不好；
</code></pre>
<p>2、MySQL常见数据库引擎及比较？</p>
<pre><code>常见的数据库引擎是MyiSAM和inmoDB
比较：
    MyISAM：
    1、它不支持事务，也不支持外键，其优势是访问的速度快
    innoDB：
    1、InnoDB支持事务安全，对比MyISAM引擎，InnoDB写的效率差一些，并且会占据更多的磁盘空间。
    2、MySQL支持外键的存储引擎只有InnoDB
</code></pre>
<p>3、简述数据三大范式？</p>
<pre><code>第一范式（ 1NF）： 字段具有原子性,不可再分。
第二范式（ 2NF）：是在第一范式（ 1NF） 的基础上建立起来的，要求数据库表中的每个实例或行必须可以被惟一地区分。通常需要为表加上一个列， 以存储各个实例的惟一标识。 这个惟一属性列被称为主关键字或主键。
第三范式（ 3NF）： 必须先满足第二范式（ 2NF）。 简而言之， 第三范式（ 3NF） 要求一个数据库表中不包含已在其它表中已包含的非主关键字信息。所以第三范式具有如下特征：1， 每一列只有一个值。2， 每一行都能区分。3， 每一个表都不包含其他表已经包含的非主关键字信息。
</code></pre>
<p>4、什么是事务？什么是锁？MySQL如何支持事务？</p>
<pre><code>事务：主要用于处理操作量大，复杂度高的数据。一般来说，事务是必须满足4个条件（ACID）：
    原子性：所谓原子操作是指不会被线程调度机制打断的操作；这种操作一旦开始，就一直运行到结束，中间不会有任何 context switch （切换到另一个线程）。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。
    一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。
    隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行，而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。
    持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。

锁：是实现事务的关键，所可以保证事务的完整性和并发行，与现实生活中的锁一样，可以使某些数据的拥有者，在某段时间内不能使用某些数据或者数据结构。

注意：MySQL 中只有使用了 Innodb 数据库引擎的数据库或表才支持事务。
</code></pre>
<p>5、简述数据库设计中一对多和多对多的应用场景？</p>
<pre><code>一对多：当在数据库的设计中，涉及到一个对象可以包含多个另外对象，而单个另外对象只能对应一个对象时就产生了一对多的关系，例学生和班级，这种情况通常将外键设在多的对象表结构中。
多对多：当在数据库的设计中，涉及到一个对象可以包含多个另外对象，而单个另外对象也对应多个对象时就产生了多对多的关系，例书籍和作者，这种情况通常将外键设在多的对象表结构中。
</code></pre>
<p>6、简述触发器、函数、视图、存储过程？</p>
<pre><code>触发器:使用触发器可以定制用户对表进行【增、删、改】操作时前后的行为,触发器无法由用户直接调用，而知由于对表的【增/删/改】操作被动引发的
函数:是MySQL数据库提供的内部函数(当然也可以自定义函数)。这些内部函数可以帮助用户更加方便的处理表中的数据
视图:视图是虚拟表或逻辑表，它被定义为具有连接的SQL SELECT查询语句。
存储过程:存储过程是存储在数据库目录中的一坨的声明性SQL语句，数据库中的一个重要对象,有效提高了程序的性能
</code></pre>
<p>7、MySQL索引种类</p>
<pre><code>普通索引、唯一索引(主键索引、唯一索引)、联合索引、全文索引、空间索引
</code></pre>
<p>8、索引在什么情况下遵循最左前缀的规则？</p>
<pre><code>在建立了联合索引的前提条件下，数据库会一直从左向右的顺序依次查找，直到遇到了范围查询(&gt;,&lt;,between,like等)
</code></pre>
<p>9、主键和外键的区别？</p>
<pre><code>主键：是指表中一个列或者列的组合，其值能够唯一的标识表中的每一个行。这样的一列或者多列成为表的主键，通过它可以强制表的实体完整性。当创建或者更改表时可以通过定义PRIMARY KEY约束来创建主键，一个表只能有一个主键约束，而且主键约束中的列不能是空值，由于主键约束确保唯一数据，所一经常来定义标识列。
外键：外键是建立于表与表之间的联系。外键保证了数据的完整性，使用外键，简单直观，可以直接在数据模型中体现，无论是设计、维护等。
</code></pre>
<p>10、MySQL常见的函数？</p>
<pre><code>聚合函数：avg,min,max,count,sum,
字符串处理函数：
    合并字符串函数：concat(str1,str2,str3…)
    比较字符串大小函数：strcmp(str1,str2)
    获取字符串字节数函数：length(str)
    获取字符串字符数函数：char_length(str)
    字母大小写转换函数：大写：upper(x),ucase(x)；小写lower(x),lcase(x)
处理数值的函数:
    绝对值函数：abs(x)
    向上取整函数：ceil(x)
    向下取整函数:floor(x)
    取模函数：mod(x,y)
    随机数函数：rand()
    四舍五入函数：round(x,y)
    数值截取函数：truncate(x,y)
用于处理时间日期的函数:
    获取当前日期：curdate()，current_date()
    获取当前时间：curtime()，current_time()
    获取当前日期时间：now()
    从日期中选择出月份数：month(date),monthname(date)
    从日期中选择出周数：week(date)
    从日期中选择出周数：year(date)
    从时间中选择出小时数：hour(time)
    从时间中选择出分钟数：minute(time)
    从时间中选择出今天是周几：weekday(date),dayname(date)
</code></pre>
<p>11、列举创建索引但是无法命中索引的8种情况。</p>
<pre><code>1、查询条件中有or、not in、not exist等
2、小表查询
3、like查询是以%开头
4、如果列类型是字符串，那一定要在条件中将数据使用引号引用起来,否则不使用索引
5、没有使用索引字段查询
6、对索引列进行运算，需要建立函数索引
7、单独引用联合索引中的非第一位置的索引
8、没有查询条件
</code></pre>
<p>12、如何开启慢日志查询？</p>
<pre><code>参数说明：
    slow_query_log： 慢查询开启状态
    slow_query_log_file：慢查询日志存放的位置（这个目录需要MySQL的运行帐号的可写权限，一般设置为MySQL的数据存放目录）
    long_query_time：查询超过多少秒才记录
开启慢日志查询方法一：全局变量设置
1、将 slow_query_log 全局变量设置为“ON”状态。指令示例：mysql&gt; set global slow_query_log='ON';
2、设置慢查询日志存放的位置：mysql&gt; set global slow_query_log_file='/usr/local/mysql/data/slow.log';
3、查询超过1秒就记录：mysql&gt; set global long_query_time=1;
开启慢日志查询方法二： 配置文件设置
修改配置文件my.cnf，在[mysqld]下的下方加入：

[mysqld]
slow_query_log = ON
slow_query_log_file = /usr/local/mysql/data/slow.log
long_query_time = 1

修改完参数后重启数据库服务就可以了
</code></pre>
<p>13、数据库导入导出命令（结构+数据）？</p>
<pre><code>导出数据库结构和数据：mysqldump -u用户名 -p密码 数据库名&gt; 路径+导出的文件名.sql
导出数据库所有表结构：mysqldump -u用户名 -p密码 -d 数据库名&gt;路径+文件名.sql
导出数据表结构和数据：mysqldump -u用户名 -p密码 数据库名 表名&gt;路径+文件名.sql
导出数据表结构：mysqldump -u用户名 -p密码 -d 数据库名 表名&gt;路径+文件名.sql
</code></pre>
<p>14、 数据库优化的思路</p>
<ul>
<li>
<p>1.SQL语句优化</p>
<p>1）应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描。
2）应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：select id from t where num is null
可以在num上设置默认值0，确保表中num列没有null值**，然后这样查询：
select id from t where num=0
3）很多时候用 exists 代替 in 是一个好的选择
4）用Where子句替换HAVING 子句 因为HAVING 只会在检索出所有记录之后才对结果集进行过滤</p>
</li>
<li>
<p>2.索引优化</p>
<p>合理使用：普通索引、唯一索引(主键索引、唯一索引)、联合索引、全文索引、空间索引</p>
</li>
<li>
<p>3.数据库结构优化</p>
<p>1）范式优化：</p>
<pre><code>比如消除冗余（节省空间。。）
</code></pre>
<p>2）反范式优化：</p>
<pre><code>比如适当加冗余等（减少join）
</code></pre>
<p>3）拆分表：</p>
<pre><code>分区将数据在物理上分隔开，不同分区的数据可以制定保存在处于不同磁盘上的数据文件里。这样，当对这个表进行查询时，只需要在表分区中进行扫描，而不必进行全表扫描，明显缩短了查询时间，另外处于不同磁盘的分区也将对这个表的数据传输分散在不同的磁盘I/O，一个精心设置的分区可以将数据传输对磁盘I/O竞争均匀地分散开。对数据量大的时时表可采取此方法。可按月自动建表分区。
</code></pre>
<p>4）拆分其实又分垂直拆分和水平拆分：</p>
<pre><code>案例： 简单购物系统暂设涉及如下表：
1.产品表（数据量10w，稳定）
2.订单表（数据量200w，且有增长趋势）
3.用户表 （数据量100w，且有增长趋势） 以mysql为例讲述下水平拆分和垂直拆分，mysql能容忍的数量级在百万静态数据可以到千万。
垂直拆分：解决问题：表与表之间的io竞争 。不解决问题：单表中数据量增长出现的压力。
方案： 把产品表和用户表放到一个server上 订单表单独放到一个server上
水平拆分： 解决问题：单表中数据量增长出现的压力 不解决问题：表与表之间的io争夺。
方案： 用户表通过性别拆分为男用户表和女用户表，订单表通过已完成和完成中拆分为已完成订单和未完成订单， 产品表、未完成订单放一个server上；已完成订单表和男用户表放一个server上；女用户表放一个server上(女的爱购物 哈哈)
</code></pre>
</li>
</ul>
<p>15、char和varchar的区别？</p>
<pre><code>char的长度是不可变的，而varchar的长度是可变的。char的存取速度还是要比varchar要快得多，因为其长度固定，方便程序的存储与查找；但是char也为此付出的是空间的代价，因为其长度固定，所以难免会有多余的空格占位符占据空间，可谓是以空间换取时间效率，而varchar是以空间效率为首位的。再者，char的存储方式是，对英文字符（ASCII）占用1个字节，对一个汉字占用两个字节；而varchar的存储方式是，对每个英文字符占用2个字节，汉字也占用2个字节。
</code></pre>
<p>16、简述MySQL的执行计划？</p>
<pre><code>在工作过程中，有时候会对慢查询进行调优。对于MySQL的SQL语句调优，MySQL本身提供了强大的explain关键字用于查询分析执行计划。

语法：从语法角度explain和describe/desc是相同的，只是一般更常用desc看表结构，explain来看查询计划。
</code></pre>
<p>17、在对name做了唯一索引前提下，简述以下区别：</p>
<pre><code>select * from tb where name = ‘Oldboy-Wupeiqi’ # 全局遍历找所有
select * from tb where name = ‘Oldboy-Wupeiqi’ limit 1 # 锁定一条就结束
</code></pre>
<p>18、1000w条数据，使用limit offset 分页时，为什么越往后翻越慢？如何解决？</p>
<pre><code>原因：越是向后,扫描的数据也就越多
解决方案:
    1、limit限制优化法：把limit偏移量限制低于某个数。。超过这个数等于没数据
    2、存储本页数据两端的主键,按主键查找后向前或向后取多少条
</code></pre>
<p>19、什么是索引合并？</p>
<pre><code>索引合并:是把几个索引的范围扫描合并成一个索引。索引合并的时候，会对索引进行并集，交集或者先交集再并集操作，以便合并成一个索引。这些需要合并的索引只能是一个表的。不能对多表进行索引合并。
</code></pre>
<p>20、什么是覆盖索引？</p>
<pre><code>MySQL可以利用索引返回SELECT 列表中的字段。而不必根据索引再次读取数据文件。 包含所有满足查询需要的数据的索引成为覆盖索引(Covering Index)。也就是平时所说的不需要回表操作
</code></pre>
<p>21、left join、right join以及inner join的区别</p>
<pre><code>left join 左关联，主表在左边，右边为从表。如果左侧的主表中没有关联字段，会用null 填满
right join 右关联 主表在右边和letf join相反
inner join 内关联只会显示主表和从表相关联的字段，不会出现null
</code></pre>
<p>22、写出一条Sql语句：取出表A中第31到第40记录 （Mysql）</p>
<pre><code>select * from A limit 30, 10
</code></pre>
<p>23、什么是数据库约束,常见的约束有哪几种?</p>
<pre><code>数据库约束用于保证数据库、表数据的完整性（正确性和一致性）。可以通过定义约束\索引\触发器来保证数据的完整性。
总体来讲,约束可以分为:
主键约束：primary key；
外键约束：foreign key；
唯一约束：unique；
检查约束：check；
空值约束：not null；
默认值约束：default；
</code></pre>
<p>25、什么是sql注入？</p>
<pre><code>SQL注入攻击指的是通过构建特殊的输入作为参数传入Web应用程序，而这些输入大都是SQL语法里的一些组合，通过执行SQL语句进而执行攻击者所要的操作，其主要原因是程序没有细致地过滤用户输入的数据，致使非法数据侵入系统。
</code></pre>
<p>26、关于sql语句应该考虑哪些安全性？</p>
<pre><code>1.防止sql注入，对特殊字符进行转义，过滤或者使用预编译的sql语句绑定变量。
2.最小权限原则，特别是不要用root账户，为不同的类型的动作或者组建使用不同的账户。
3.当sql运行出错时，不要把数据库返回的错误信息全部显示给用户，以防止泄漏服务器和数据库相关信息。
</code></pre>
<p>27、一张表,里面有ID自增主键,当insert了17条记录之后,删除了第15,16,17条记录,再把Mysql重启,再insert一条记录,这条记录的ID是18还是15 ？</p>
<pre><code>如果表的类型是MyISAM，那么是18。
因为MyISAM表会把自增主键的最大ID记录到数据文件里，重启MySQL自增主键的最大ID也不会丢失。
如果表的类型是InnoDB，那么是15。
InnoDB表只是把自增主键的最大ID记录到内存中，所以重启数据库或者是对表进行OPTIMIZE操作，都会导致最大ID丢失。
</code></pre>
<p>29、简述数据库的读写分离？</p>
<pre><code>读写分离为了确保数据库产品的稳数据定性，很多数据库拥有双机热备功能。也就是，第一台数据库服务器，是对外提供增删改业务的生产服务器；第二台数据库服务器，主要进行读的操作。
</code></pre>
<p>30、简述数据库分库分表？（水平、垂直）</p>
<pre><code>垂直分库：就是按照功能的不同，把没有关联的数据放到不同的数据库和服务器中
水平分表：根据一定的规则将一个表的数据划分到不同的数据库中，两个数据库的表结构一样。
</code></pre>
<h2 id="mysql60">最全MySQL面试60题和答案</h2>
<h4 id="1mysql">1.Mysql中有哪几种锁？</h4>
<pre><code>1. 表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低。

2. 行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。

3. 页面锁：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般。
</code></pre>
<h4 id="2mysql">2.Mysql中有哪些不同的表类型？</h4>
<pre><code>BDB、HEAP、ISAM、MERGE、MyISAM、InnoDB以及Gemeni这7种Mysql表类型
</code></pre>
<h4 id="3mysqlmyisaminnodb">3.简述在MySQL数据库中MyISAM和InnoDB的区别</h4>
<pre><code>MyISAM：
不支持事务，但是每次查询都是原子的；
支持表级锁，即每次操作是对整个表加锁；
存储表的总行数；
一个MYISAM表有三个文件：索引文件、表结构文件、数据文件；
采用非聚集索引，索引文件的数据域存储指向数据文件的指针。辅索引与主索引基本一致，但是辅索引不用保证唯一性。

InnoDb：
支持ACID的事务，支持事务的四种隔离级别；
支持行级锁及外键约束：因此可以支持写并发；
不存储总行数；
一个InnoDb引擎存储在一个文件空间（共享表空间，表大小不受操作系统控制，一个表可能分布在多个文件里）
也有可能为多个（设置为独立表空，表大小受操作系统文件大小限制，一般为2G），受操作系统文件大小的限制；
主键索引采用聚集索引（索引的数据域存储数据文件本身），辅索引的数据域存储主键的值；
因此从辅索引查找数据，需要先通过辅索引找到主键值，再访问辅索引；
最好使用自增主键，防止插入数据时，为维持B+树结构，文件的大调整。
</code></pre>
<h4 id="4mysqlinnodb">4.Mysql中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？</h4>
<pre><code>SQL标准定义的四个隔离级别为：
-  read uncommited ：读到未提交数据
-  read committed：脏读，不可重复读
-  repeatable read：可重读
-  serializable ：串行事物
</code></pre>
<h4 id="5charvarchar">5.CHAR和VARCHAR的区别？</h4>
<pre><code>1. CHAR和VARCHAR类型在存储和检索方面有所不同
2. CHAR列长度固定为创建表时声明的长度，长度值范围是1到255
3. 当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。
</code></pre>
<h4 id="6">6.主键和候选键有什么区别？</h4>
<pre><code>表格的每一行都由主键唯一标识,一个表只有一个主键。
主键也是候选键。按照惯例，候选键可以被指定为主键，并且可以用于任何外键引用。
</code></pre>
<h4 id="7myisamchk">7.myisamchk是用来做什么的？</h4>
<pre><code>它用来压缩MyISAM表，这减少了磁盘或内存使用。
</code></pre>
<h4 id="8myisam-staticmyisam-dynamic">8.MyISAM Static和MyISAM Dynamic有什么区别？</h4>
<pre><code>在MyISAM Static上的所有字段有固定宽度。动态MyISAM表将具有像TEXT，BLOB等字段，以适应不同长度的数据类型。
MyISAM Static在受损情况下更容易恢复。
</code></pre>
<h4 id="9timestamp">9.如果一个表有一列定义为TIMESTAMP，将发生什么？</h4>
<pre><code>每当行被更改时，时间戳字段将获取当前时间戳。
</code></pre>
<h4 id="10auto-increment">10.列设置为AUTO INCREMENT时，如果在表中达到最大值，会发生什么情况？</h4>
<pre><code>它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。
</code></pre>
<h4 id="11">11.怎样才能找出最后一次插入时分配了哪个自动增量？</h4>
<pre><code>LAST_INSERT_ID将返回由Auto_increment分配的最后一个值，并且不需要指定表名称。
</code></pre>
<h4 id="12">12.你怎么看到为表格定义的所有索引？</h4>
<pre><code>索引是通过以下方式为表格定义的：
````
SHOW INDEX FROM &lt;tablename&gt;;
````
</code></pre>
<h4 id="13like_">13.LIKE声明中的％和_是什么意思？</h4>
<pre><code>％对应于0个或更多字符，_只是LIKE语句中的一个字符。
</code></pre>
<h4 id="14unixmysql">14.如何在Unix和Mysql时间戳之间进行转换？</h4>
<pre><code>UNIX_TIMESTAMP是从Mysql时间戳转换为Unix时间戳的命令
FROM_UNIXTIME是从Unix时间戳转换为Mysql时间戳的命令
</code></pre>
<h4 id="15">15.列对比运算符是什么？</h4>
<pre><code>在SELECT语句的列比较中使用=，&lt;&gt;，&lt;=，&lt;，&gt; =，&gt;，&lt;&lt;，&gt;&gt;，&lt;=&gt;，AND，OR或LIKE运算符。
</code></pre>
<h4 id="16blobtext">16.BLOB和TEXT有什么区别？</h4>
<pre><code>BLOB是一个二进制对象，可以容纳可变数量的数据。TEXT是一个不区分大小写的BLOB。

BLOB和TEXT类型之间的唯一区别在于对BLOB值进行排序和比较时区分大小写，对TEXT值不区分大小写。
</code></pre>
<h4 id="17mysql_fetch_arraymysql_fetch_object">17.mysql_fetch_array和mysql_fetch_object的区别是什么？</h4>
<pre><code>mysql_fetch_array（） – 将结果行作为关联数组或来自数据库的常规数组返回。
mysql_fetch_object – 从数据库返回结果行作为对象。
</code></pre>
<h4 id="18myisam">18.MyISAM表类型将在哪里存储，并且还提供其存储格式？</h4>
<pre><code>每个MyISAM表格以三种格式存储在磁盘上：

“.frm”文件 存储表定义

数据文件具有“.MYD”（MYData）扩展名

索引文件具有“.MYI”（MYIndex）扩展名
</code></pre>
<h4 id="19mysqldistinct">19.Mysql如何优化DISTINCT？</h4>
<pre><code>DISTINCT在所有列上转换为GROUP BY，并与ORDER BY子句结合使用。

SELECT DISTINCT t1.a FROM t1,t2 where t1.a=t2.a;
</code></pre>
<h4 id="20">20.可以使用多少列创建索引？</h4>
<pre><code>任何标准表最多可以创建16个索引列。
</code></pre>
<h4 id="21nowcurrent_date">21.NOW（）和CURRENT_DATE（）有什么区别？</h4>
<pre><code>NOW（）命令用于显示当前年份，月份，日期，小时，分钟和秒。
CURRENT_DATE（）仅显示当前年份，月份和日期。
</code></pre>
<h4 id="22">22.什么是非标准字符串类型？</h4>
<pre><code>````
TINYTEXT
TEXT
MEDIUMTEXT
LONGTEXT
````
</code></pre>
<h4 id="23sql">23.什么是通用SQL函数？</h4>
<pre><code>````
CONCAT(A, B) – 连接两个字符串值以创建单个字符串输出。通常用于将两个或多个字段合并为一个字段。
FORMAT(X, D)- 格式化数字X到D有效数字。
CURRDATE(), CURRTIME()- 返回当前日期或时间。
NOW() – 将当前日期和时间作为一个值返回。
MONTH()，DAY()，YEAR()，WEEK()，WEEKDAY() – 从日期值中提取给定数据。
HOUR()，MINUTE()，SECOND() – 从时间值中提取给定数据。
DATEDIFF(A，B) – 确定两个日期之间的差异，通常用于计算年龄
SUBTIMES(A，B) – 确定两次之间的差异。
FROMDAYS(INT) – 将整数天数转换为日期值。
````
</code></pre>
<h4 id="24mysql">24.MYSQL支持事务吗？</h4>
<pre><code>在缺省模式下，MYSQL是autocommit模式的，所有的数据库更新操作都会即时提交，所以在缺省情况下，mysql是不支持事务的。

但是如果你的MYSQL表类型是使用InnoDB Tables 或 BDB tables的话，你的MYSQL就可以使用事务处理,使用SET
AUTOCOMMIT=0就可以使MYSQL允许在非autocommit模式，在非autocommit模式下，你必须使用COMMIT来提交你的更改，或者用ROLLBACK来回滚你的更改。
</code></pre>
<h4 id="25mysql">25.mysql里记录货币用什么字段类型好</h4>
<pre><code>NUMERIC和DECIMAL类型被Mysql实现为同样的类型，这在SQL92标准允许。他们被用于保存值，该值的准确精度是极其重要的值，例如与金钱有关的数据。当声明一个类是这些类型之一时，精度和规模的能被(并且通常是)指定。

例如：

salary DECIMAL(9,2)

在这个例子中，9(precision)代表将被用于存储值的总的小数位数，而2(scale)代表将被用于存储小数点后的位数。

因此，在这种情况下，能被存储在salary列中的值的范围是从-9999999.99到9999999.99。
</code></pre>
<h4 id="26mysql">26.mysql有关权限的表都有哪几个？</h4>
<pre><code>Mysql服务器通过权限表来控制用户对数据库的访问，权限表存放在mysql数据库里，由mysql_install_db脚本初始化。这些权限表分别user，db，table_priv，columns_priv和host。
</code></pre>
<h4 id="27">27.列的字符串类型可以是什么？</h4>
<pre><code>````
SET
BLOB
ENUM
CHAR
TEXT
````
</code></pre>
<h4 id="28mysql">28.MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？</h4>
<pre><code>1. 设计良好的数据库结构，允许部分数据冗余，尽量避免join查询，提高效率。
2. 选择合适的表字段数据类型和存储引擎，适当的添加索引。
3. mysql库主从读写分离。
4. 找规律分表，减少单表中的数据量提高查询速度。
5. 添加缓存机制，比如memcached，redis等。
6. 不经常改动的页面，生成静态页面。
7. 书写高效率的SQL。比如 SELECT * FROM TABEL 改为 SELECT field_1, field_2, field_3 FROM TABLE
</code></pre>
<h4 id="29">29.锁的优化策略</h4>
<pre><code>1. 读写分离
2. 分段加锁
3. 减少锁持有的时间
4. 多个线程尽量以相同的顺序去获取资源

不能将锁的粒度过于细化，不然可能会出现线程的加锁和释放次数过多，反而效率不如一次加一把大锁。
</code></pre>
<h4 id="30">30.索引的底层实现原理和优化</h4>
<pre><code>B+树，经过优化的B+树

主要是在所有的叶子结点中增加了指向下一个叶子节点的指针，因此InnoDB建议为大部分表使用默认自增的主键作为主索引。
</code></pre>
<h4 id="31">31.什么情况下设置了索引但无法使用</h4>
<ol>
<li>
<p>以“%”开头的LIKE语句，模糊匹配</p>
</li>
<li>
<p>OR语句前后没有同时使用索引</p>
</li>
<li>
<p>数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）</p>
</li>
</ol>
<h4 id="32mysql">32实践中如何优化MySQL</h4>
<ol>
<li>
<p>SQL语句及索引的优化</p>
</li>
<li>
<p>数据库表结构的优化</p>
</li>
<li>
<p>系统配置的优化</p>
</li>
<li>
<p>硬件的优化</p>
</li>
</ol>
<p>详细可以查看 阿里P8架构师谈：MySQL慢查询优化、索引优化、以及表等优化总结</p>
<h4 id="33">33.优化数据库的方法</h4>
<ul>
<li>选取最适用的字段属性，尽可能减少定义字段宽度，尽量把字段设置NOTNULL，例如’省份’、’性别’最好适用ENUM</li>
<li>使用连接(JOIN)来代替子查询</li>
<li>适用联合(UNION)来代替手动创建的临时表</li>
<li>事务处理</li>
<li>锁定表、优化事务处理</li>
<li>适用外键，优化锁定表</li>
<li>建立索引</li>
<li>优化查询语句</li>
</ul>
<h4 id="34mysql">34.简单描述mysql中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）</h4>
<p>索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。</p>
<p>普通索引(由关键字KEY或INDEX定义的索引)的唯一任务是加快对数据的访问速度。</p>
<p>普通索引允许被索引的数据列包含重复的值。如果能确定某个数据列将只包含彼此各不相同的值，在为这个数据列创建索引的时候就应该用关键字UNIQUE把它定义为一个唯一索引。也就是说，唯一索引可以保证数据记录的唯一性。</p>
<p>主键，是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一条记录，使用关键字 PRIMARY KEY 来创建。</p>
<p>索引可以覆盖多个数据列，如像INDEX(columnA, columnB)索引，这就是联合索引。</p>
<p>索引可以极大的提高数据的查询速度，但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件。</p>
<h4 id="35">35.数据库中的事务是什么?</h4>
<p>事务（transaction）是作为一个单元的一组有序的数据库操作。如果组中的所有操作都成功，则认为事务成功，即使只有一个操作失败，事务也不成功。如果所有操作完成，事务则提交，其修改将作用于所有其他数据库进程。如果一个操作失败，则事务将回滚，该事务所有操作的影响都将取消。</p>
<p>事务特性：</p>
<p>（1）原子性：即不可分割性，事务要么全部被执行，要么就全部不被执行。</p>
<p>（2）一致性或可串性。事务的执行使得数据库从一种正确状态转换成另一种正确状态</p>
<p>（3）隔离性。在事务正确提交之前，不允许把该事务对数据的任何改变提供给任何其他事务，</p>
<p>（4） 持久性。事务正确提交后，其结果将永久保存在数据库中，即使在事务提交后有了其他故障，事务的处理结果也会得到保存。</p>
<p>或者这样理解：</p>
<p>事务就是被绑定在一起作为一个逻辑工作单元的SQL语句分组，如果任何一个语句操作失败那么整个操作就被失败，以后操作就会回滚到操作前状态，或者是上有个节点。为了确保要么执行，要么不执行，就可以使用事务。要将有组语句作为事务考虑，就需要通过ACID测试，即原子性，一致性，隔离性和持久性。</p>
<h4 id="36sql">36.SQL注入漏洞产生的原因？如何防止？</h4>
<p>SQL注入产生的原因：程序开发过程中不注意规范书写sql语句和对特殊字符进行过滤，导致客户端可以通过全局变量POST和GET提交一些sql语句正常执行。</p>
<p>防止SQL注入的方式：
开启配置文件中的magic_quotes_gpc 和 magic_quotes_runtime设置</p>
<p>执行sql语句时使用addslashes进行sql语句转换</p>
<p>Sql语句书写尽量不要省略双引号和单引号。</p>
<p>过滤掉sql语句中的一些关键词：update、insert、delete、select、 * 。</p>
<p>提高数据库表和字段的命名技巧，对一些重要的字段根据程序的特点命名，取不易被猜到的。</p>
<h4 id="37">37.为表中得字段选择合适得数据类型</h4>
<p>字段类型优先级: 整形&gt;date,time&gt;enum,char&gt;varchar&gt;blob,text
 优先考虑数字类型，其次是日期或者二进制类型，最后是字符串类型，同级别得数据类型，应该优先选择占用空间小的数据类型</p>
<h4 id="38">38.存储时期</h4>
<p>Datatime:以 YYYY-MM-DD HH:MM:SS 格式存储时期时间，精确到秒，占用8个字节得存储空间，datatime类型与时区无关
Timestamp:以时间戳格式存储，占用4个字节，范围小1970-1-1到2038-1-19，显示依赖于所指定得时区，默认在第一个列行的数据修改时可以自动得修改timestamp列得值
Date:（生日）占用得字节数比使用字符串.datatime.int储存要少，使用date只需要3个字节，存储日期月份，还可以利用日期时间函数进行日期间得计算
Time:存储时间部分得数据
注意:不要使用字符串类型来存储日期时间数据（通常比字符串占用得储存空间小，在进行查找过滤可以利用日期得函数）
使用int存储日期时间不如使用timestamp类型</p>
<h4 id="39">39.对于关系型数据库而言，索引是相当重要的概念，请回答有关索引的几个问题：</h4>
<ol>
<li>
<p>索引的目的是什么？  <br />
快速访问数据表中的特定信息，提高检索速度  <br />
创建唯一性索引，保证数据库表中每一行数据的唯一性。 <br />
加速表和表之间的连接<br />
使用分组和排序子句进行数据检索时，可以显著减少查询中分组和排序的时间</p>
</li>
<li>
<p>索引对数据库系统的负面影响是什么？  <br />
负面影响： <br />
创建索引和维护索引需要耗费时间，这个时间随着数据量的增加而增加；  <br />
索引需要占用物理空间，不光是表需要占用数据空间，每个索引也需要占用物理空间；<br />
当对表进行增、删、改、的时候索引也要动态维护，这样就降低了数据的维护速度。</p>
</li>
<li>
<p>为数据表建立索引的原则有哪些？<br />
在最频繁使用的、用以缩小查询范围的字段上建立索引。 <br />
在频繁使用的、需要排序的字段上建立索引 </p>
</li>
<li>
<p>什么情况下不宜建立索引？ 
对于查询中很少涉及的列或者重复值比较多的列，不宜建立索引。 <br />
对于一些特殊的数据类型，不宜建立索引，比如文本字段（text）等</p>
</li>
</ol>
<h4 id="40mysql">40.解释MySQL外连接、内连接与自连接的区别</h4>
<p>先说什么是交叉连接: 交叉连接又叫笛卡尔积，它是指不使用任何条件，直接将一个表的所有记录和另一个表中的所有记录一一匹配。</p>
<p>内连接     则是只有条件的交叉连接，根据某个条件筛选出符合条件的记录，不符合条件的记录不会出现在结果集中，即内连接只连接匹配的行。     </p>
<p>外连接 其结果集中不仅包含符合连接条件的行，而且还会包括左表、右表或两个表中的所有数据行，这三种情况依次称之为左外连接，右外连接，和全外连接。</p>
<p>左外连接    也称左连接，左表为主表，左表中的所有记录都会出现在结果集中，对于那些在右表中并没有匹配的记录，仍然要显示，右边对应的那些字段值以NULL来填充。    </p>
<p>右外连接    也称右连接，右表为主表，右表中的所有记录都会出现在结果集中。左连接和右连接可以互换，MySQL目前还不支持全外连接。</p>
<h4 id="41myql">41.Myql中的事务回滚机制概述</h4>
<p>事务是用户定义的一个数据库操作序列，这些操作要么全做要么全不做，是一个不可分割的工作单位，事务回滚是指将该事务已经完成的对数据库的更新操作撤销。</p>
<p>要同时修改数据库中两个不同表时，如果它们不是一个事务的话，当第一个表修改完，可能第二个表修改过程中出现了异常而没能修改，此时就只有第二个表依旧是未修改之前的状态，而第一个表已经被修改完毕。而当你把它们设定为一个事务的时候，当第一个表修改完，第二表修改出现异常而没能修改，第一个表和第二个表都要回到未修改的状态，这就是所谓#### 42.的事务回滚</p>
<h4 id="42sql">42.SQL语言包括哪几部分？每部分都有哪些操作关键字？</h4>
<p>SQL语言包括数据定义(DDL)、数据操纵(DML),数据控制(DCL)和数据查询（DQL）四个部分。</p>
<p>数据定义：Create Table,Alter Table,Drop Table, Craete/Drop Index等</p>
<p>数据操纵：Select ,insert,update,delete,</p>
<p>数据控制：grant,revoke</p>
<p>数据查询：select</p>
<h4 id="43">43.完整性约束包括哪些？</h4>
<p>数据完整性(Data Integrity)是指数据的精确(Accuracy)和可靠性(Reliability)。</p>
<p>分为以下四类：</p>
<p>1) 实体完整性：规定表的每一行在表中是惟一的实体。</p>
<p>2) 域完整性：是指表中的列必须满足某种特定的数据类型约束，其中约束又包括取值范围、精度等规定。</p>
<p>3) 参照完整性：是指两个表的主关键字和外关键字的数据应一致，保证了表之间的数据的一致性，防止了数据丢失或无意义的数据在数据库中扩散。</p>
<p>4) 用户定义的完整性：不同的关系数据库系统根据其应用环境的不同，往往还需要一些特殊的约束条件。用户定义的完整性即是针对某个特定关系数据库的约束条件，它反映某一具体应用必须满足的语义要求。</p>
<p>与表有关的约束：包括列约束(NOT NULL（非空约束）)和表约束(PRIMARY KEY、foreign key、check、UNIQUE) 。</p>
<h4 id="44">44.什么是锁？</h4>
<p>数据库是一个多用户使用的共享资源。当多个用户并发地存取数据时，在数据库中就会产生多个事务同时存取同一数据的情况。若对并发操作不加控制就可能会读取和存储不正确的数据，破坏数据库的一致性。</p>
<p>加锁是实现数据库并发控制的一个非常重要的技术。当事务在对某个数据对象进行操作前，先向系统发出请求，对其加锁。加锁后事务就对该数据对象有了一定的控制，在该事务释放锁之前，其他的事务不能对此数据对象进行更新操作。</p>
<p>基本锁类型：锁包括行级锁和表级锁</p>
<h4 id="45">45.什么叫视图？游标是什么？</h4>
<p>视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增，改，查，操作，视图通常是有一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易，相比多表查询。</p>
<p>游标：是对查询出来的结果集作为一个单元来有效的处理。游标可以定在该单元中的特定行，从结果集的当前行检索一行或多行。可以对结果集当前行做修改。一般不使用游标，但是需要逐条处理数据的时候，游标显得十分重要。</p>
<h4 id="46">46.什么是存储过程？用什么来调用？</h4>
<pre><code>存储过程是一个预编译的SQL语句，优点是允许模块化的设计，就是说只需创建一次，以后在该程序中就可以调用多次。如果某次操作需要执行多次SQL，使用存储过程比单纯SQL语句执行要快。可以用一个命令对象来调用存储过程。
</code></pre>
<h4 id="47">47.如何通俗地理解三个范式？</h4>
<pre><code>第一范式：1NF是对属性的原子性约束，要求属性具有原子性，不可再分解；

第二范式：2NF是对记录的惟一性约束，要求记录有惟一标识，即实体的惟一性；

第三范式：3NF是对字段冗余性的约束，即任何字段不能由其他字段派生出来，它要求字段没有冗余。。

范式化设计优缺点:

优点:

可以尽量得减少数据冗余，使得更新快，体积小

缺点:

对于查询需要多个表进行关联，减少写得效率增加读得效率，更难进行索引优化

反范式化:

优点:可以减少表得关联，可以更好得进行索引优化

缺点:数据冗余以及数据异常，数据得修改需要更多的成本
</code></pre>
<h4 id="48">48.什么是基本表？什么是视图？</h4>
<pre><code>基本表是本身独立存在的表，在 SQL 中一个关系就对应一个表。  
视图是从一个或几个基本表导出的表。视图本身不独立存储在数据库中，是一个虚表
</code></pre>
<h4 id="49">49.试述视图的优点？</h4>
<pre><code>1) 视图能够简化用户的操作  
2) 视图使用户能以多种角度看待同一数据
3) 视图为数据库提供了一定程度的逻辑独立性
4) 视图能够对机密数据提供安全保护。
</code></pre>
<h4 id="50-null">50. NULL是什么意思</h4>
<pre><code>NULL这个值表示UNKNOWN(未知):它不表示“”(空字符串)。对NULL这个值的任何比较都会生产一个NULL值。您不能把任何值与一个 NULL值进行比较，并在逻辑上希望获得一个答案。
</code></pre>
<p>使用IS  NULL来进行NULL判断</p>
<h4 id="51">51.主键、外键和索引的区别？</h4>
<pre><code>定义：
主键–唯一标识一条记录，不能有重复的，不允许为空
外键–表的外键是另一表的主键, 外键可以有重复的, 可以是空值
索引–该字段没有重复值，但可以有一个空值

作用：
主键–用来保证数据完整性
外键–用来和其他表建立联系用的
索引–是提高查询排序的速度

个数：
主键–主键只能有一个
外键–一个表可以有多个外键
索引–一个表可以有多个唯一索引
</code></pre>
<h4 id="52">52.你可以用什么来确保表格里的字段只接受特定范围里的值?</h4>
<pre><code>Check限制，它在数据库表格里被定义，用来限制输入该列的值。
触发器也可以被用来限制数据库表格里的字段能够接受的值，但是这种办法要求触发器在表格里被定义，这可能会在某些情况下影响到性能。
</code></pre>
<h4 id="53sql">53.说说对SQL语句优化有哪些方法？（选择几条）</h4>
<pre><code>1. Where子句中：where表之间的连接必须写在其他Where条件之前，那些可以过滤掉最大数量记录的条件必须写在Where子句的末尾.HAVING最后。
2. 用EXISTS替代IN、用NOT EXISTS替代NOT IN。
3. 避免在索引列上使用计算
4. 避免在索引列上使用IS NULL和IS NOT NULL
5. 对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。
6. 应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描
7. 应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.78eede0e.min.js"></script>
      
    
  </body>
</html>