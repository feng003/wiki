
## 1.数据库存储引擎 myIsam 和 innodb 区别  


|         | 	InnoDB  	|     MyISAM   |
|   ----  |         ----    |     ----     |
存储引擎类型  |	事务存储类型，如果写入未完成，它会自动回滚。 |	非事务性存储类型，任何写入选项都需要手动回滚
锁  | 	使用表的行级锁定。此方法通过仅锁定修改过程中的行来支持同一行上的多个会话。行锁定对于具有多个用户的数据库很有帮助。行级锁唯一的缺点就是消耗内存大，查询和修改数据都需要时间。 |	使用表锁定的默认方法并允许单个会话修改表。这意味着一次只有一个用户可以更改表。如果另一个用户试图更改该表，他们将收到一条消息说它已被锁定。表锁定方法对只读数据库很有帮助，因为它不需要大量内存。
外健 |	支持外键选项  |	不支持外键选项。
ACID 属性  |	InnoDB 支持 ACID 属性  |	不支持 ACID 属性
性能 |	支持事务属性，即回滚和提交，写入速度更高。与 MyISAM 相比，InnoDB 对于大量数据的性能更好。 |	不支持事务属性并且读取速度更快。与 InnoDB 相比，大数据量的性能较低。
缓存和索引 |	支持缓存数据和索引的大型缓冲区池。但是，不支持全文搜索。 |	键缓冲区仅用于索引，MyISAM 支持全文搜索。
可靠性  | 	使用事务日志来记录每个操作，从而提供可靠的操作。因此，如果发生故障，可以使用这些日志快速恢复数据。|  	不提供数据完整性；硬件故障和取消的操作会导致数据损坏。


## 2.查询优化

    1、SQL 语句分析：首先需要对查询语句进行分析，了解查询的目的和查询涉及到的表和数据，确定查询的正确性和合理性。

    2、索引优化：索引是提高查询性能的重要手段，通过合理的索引设计可以提高查询的速度和效率。因此在查询优化中，需要对索引的设计和使用进行优化。

    3、缓存优化：数据库缓存是提高查询效率的另一种重要手段，通过使用缓存可以减少查询对磁盘的访问次数，从而提高查询速度。因此在查询优化中，需要对缓存的设计和使用进行优化。

    4、查询重构：通过重构查询语句，可以改善查询性能，例如通过优化查询条件、合理使用子查询等方式来改善查询效率。

    5、查询执行计划优化：查询执行计划是指数据库系统在执行查询时所采用的具体执行方案，通过优化查询执行计划，可以进一步提高查询效率和性能

### 2.1 影响需要进行的计算数量以及的查询运行时的重要问题：

    表大小： 如果你的查询命中一个或多个具有数百万行或更多行的表，它可能会影响性能。
    连接： 如果你的查询以显著增加结果集行数的方式连接两个表，则你的查询可能会变慢。在子查询课程中有一个这样的例子。
    聚合： 组合多行以产生结果需要比简单地检索这些行更多的计算。

### 2.2 查询优化方法

#### 减少查询访问的数量

    避免过多的 JOIN
    避免使用 SELECT DISTINCT
    使用 SELECT 字段而不是 SELECT *

#### 索引优化

    在 MySQL 建立联合索引时会遵循最左前缀匹配的原则，即最左优先，在检索数据时从联合索引的最左边开始匹配，我们可以通过 Explain 看当前走的是什么索引，和我们理解的是不是相同。

    尽量选择区分度高的列作为索引，区分度越高比例越大我们扫描的记录数越少，扫描越少，就越快。例如唯一键的区分度是 1，而一些状态、性别字段可能在大数据面前区分度就是 0，那可能有人会问，这个比例有什么经验值吗？使用场景不同，这个值也很难确定，一般需要 join 的字段我们都要求是 0.1 以上，即平均 1 条扫描 10 条记录。

    索引列不能参与计算，保持列“干净”，原因很简单，在 MySQL 索引的实现数据结构决定的。b+树中存的都是数据表中的字段值，但进行检索时，需要把所有元素都应用函数才能比较，显然成本太大。

## 3.锁

    MySQL 数据库的锁机制是一种用于管理多个数据库会话对同一数据对象（如表或行）的并发访问的机制。
    MySQL中存在表锁和行锁，以及乐观锁和悲观锁，它们的不同粒度和开销决定了它们在不同场景下的使用。

### 3.1 行锁 和 表锁

### 3.2 乐观锁 和 悲观锁  一种并发控制的方法

